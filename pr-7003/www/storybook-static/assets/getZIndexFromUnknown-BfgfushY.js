import{ag as P,a3 as h}from"./axisSelectors-Dnswsufb.js";import{j as g,g as y}from"./iframe-Cy8G_j66.js";import{n as v}from"./arrayEqualityCheck-dp8dfL7u.js";const B=(t,o,e)=>{const n=e??t;if(!g(n))return y(n,o,0)},D=(t,o,e)=>{const n={},u=t.filter(P),i=t.filter(r=>r.stackId==null),a=u.reduce((r,c)=>{let s=r[c.stackId];return s==null&&(s=[]),s.push(c),r[c.stackId]=s,r},n),k=Object.entries(a).map(([r,c])=>{var m;const s=c.map(d=>d.dataKey),l=B(o,e,(m=c[0])==null?void 0:m.barSize);return{stackId:r,dataKeys:s,barSize:l}}),f=i.map(r=>{const c=[r.dataKey].filter(l=>l!=null),s=B(o,e,r.barSize);return{stackId:void 0,dataKeys:c,barSize:s}});return[...k,...f]};function j(t,o,e,n,u){var r;const i=n.length;if(i<1)return;let a=y(t,e,0,!0),k;const f=[];if(v((r=n[0])==null?void 0:r.barSize)){let c=!1,s=e/i,l=n.reduce((I,p)=>I+(p.barSize||0),0);l+=(i-1)*a,l>=e&&(l-=(i-1)*a,a=0),l>=e&&s>0&&(c=!0,s*=.9,l=i*s);let d={offset:((e-l)/2>>0)-a,size:0};k=n.reduce((I,p)=>{const K={stackId:p.stackId,dataKeys:p.dataKeys,position:{offset:d.offset+d.size+a,size:c?s:p.barSize??0}},x=[...I,K];return d=K.position,x},f)}else{const c=y(o,e,0,!0);e-2*c-(i-1)*a<=0&&(a=0);let s=(e-2*c-(i-1)*a)/i;s>1&&(s>>=0);const l=v(u)?Math.min(s,u):s;k=n.reduce((m,d,I)=>[...m,{stackId:d.stackId,dataKeys:d.dataKeys,position:{offset:c+(s+a)*I+(s-l)/2,size:l}}],f)}return k}const F=(t,o,e,n,u,i,a)=>{const k=g(a)?o:a;let f=j(e,n,u!==i?u:i,t,k);return u!==i&&f!=null&&(f=f.map(r=>({...r,position:{...r.position,offset:r.position.offset-u/2}}))),f},N=(t,o)=>{const e=h(o);if(!t||e==null||o==null)return;const{stackId:n}=o;if(n==null)return;const u=t[n];if(!u)return;const{stackedData:i}=u;if(i)return i.find(a=>a.key===e)},A=(t,o)=>{if(t==null||o==null)return;const e=t.find(n=>n.stackId===o.stackId&&o.dataKey!=null&&n.dataKeys.includes(o.dataKey));if(e!=null)return e.position};function G(t,o){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&v(t.zIndex)?t.zIndex:o}export{N as a,F as b,A as c,D as d,G as g};
