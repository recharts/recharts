import{af as g,a2 as h}from"./axisSelectors-CQvuHlQI.js";import{j as x,g as y}from"./iframe-BtpSaGeD.js";import{n as v}from"./arrayEqualityCheck-csfjq8mV.js";const B=(t,o,e)=>{const n=e??t;if(!x(n))return y(n,o,0)},D=(t,o,e)=>{const n={},l=t.filter(g),i=t.filter(r=>r.stackId==null),a=l.reduce((r,c)=>{let s=r[c.stackId];return s==null&&(s=[]),s.push(c),r[c.stackId]=s,r},n),k=Object.entries(a).map(([r,c])=>{var m;const s=c.map(d=>d.dataKey),f=B(o,e,(m=c[0])==null?void 0:m.barSize);return{stackId:r,dataKeys:s,barSize:f}}),u=i.map(r=>{const c=[r.dataKey].filter(f=>f!=null),s=B(o,e,r.barSize);return{stackId:void 0,dataKeys:c,barSize:s}});return[...k,...u]};function j(t,o,e,n,l){var r;const i=n.length;if(i<1)return;let a=y(t,e,0,!0),k;const u=[];if(v((r=n[0])==null?void 0:r.barSize)){let c=!1,s=e/i,f=n.reduce((I,p)=>I+(p.barSize||0),0);f+=(i-1)*a,f>=e&&(f-=(i-1)*a,a=0),f>=e&&s>0&&(c=!0,s*=.9,f=i*s);let d={offset:((e-f)/2>>0)-a,size:0};k=n.reduce((I,p)=>{const K={stackId:p.stackId,dataKeys:p.dataKeys,position:{offset:d.offset+d.size+a,size:c?s:p.barSize??0}},P=[...I,K];return d=K.position,P},u)}else{const c=y(o,e,0,!0);e-2*c-(i-1)*a<=0&&(a=0);let s=(e-2*c-(i-1)*a)/i;s>1&&(s>>=0);const f=v(l)?Math.min(s,l):s;k=n.reduce((m,d,I)=>[...m,{stackId:d.stackId,dataKeys:d.dataKeys,position:{offset:c+(s+a)*I+(s-f)/2,size:f}}],u)}return k}const F=(t,o,e,n,l,i,a)=>{const k=x(a)?o:a;let u=j(e,n,l!==i?l:i,t,k);return l!==i&&u!=null&&(u=u.map(r=>({...r,position:{...r.position,offset:r.position.offset-l/2}}))),u},N=(t,o)=>{const e=h(o);if(!t||e==null||o==null)return;const{stackId:n}=o;if(n==null)return;const l=t[n];if(!l)return;const{stackedData:i}=l;if(i)return i.find(a=>a.key===e)},A=(t,o)=>{if(t==null||o==null)return;const e=t.find(n=>n.stackId===o.stackId&&o.dataKey!=null&&n.dataKeys.includes(o.dataKey));if(e!=null)return e.position};function G(t,o){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&v(t.zIndex)?t.zIndex:o}export{N as a,F as b,A as c,D as d,G as g};
