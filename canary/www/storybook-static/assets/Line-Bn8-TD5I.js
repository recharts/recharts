import{r as i,n as ie,j as q,c as D}from"./iframe-DDewu6bn.js";import{r as G,c as re,s as se,b as oe}from"./resolveDefaultProps-B5JubxST.js";import{L as le}from"./Layer-DqLbE6Uv.js";import{i as ce,a as ue,C as de}from"./ReactUtils-DtjzxdpY.js";import{A as me,D as pe}from"./ActivePoints-6rWUYf_F.js";import{o as B,p as M,C as fe,E as z,D as he,c as O,F as j,l as ye,b as xe,q as X,G as R}from"./arrayEqualityCheck-DXTExga0.js";import{R as ge,S as Ae}from"./RegisterGraphicalItemId-CHV5Wa4s.js";import{S as ve}from"./ErrorBarContext-CZxFfXpJ.js";import{u as Ee,G as Ie}from"./GraphicalItemClipPath-B9jmiGSm.js";import{S as Le,a as Pe}from"./SetGraphicalItem-CnIZ3Mlk.js";import{u as Se,J as De}from"./useAnimationId-CjgQOJMR.js";import{c as ke}from"./hooks-DyhX_5uQ.js";import{g as Ce}from"./getRadiusAndStrokeWidthFromDot-dhATJ_xE.js";import{S as be}from"./ActiveShapeUtils-uXTIH56O.js";import{Z as Ne}from"./ZIndexLayer-mUyPWZcK.js";import{p as We}from"./RechartsWrapper-CzQiRy-1.js";import{V as Y,W as Z,X as Te,Y as Ve}from"./axisSelectors-DesRmFZd.js";const J=(t,e,a,n)=>Y(t,"xAxis",e,n),U=(t,e,a,n)=>Z(t,"xAxis",e,n),H=(t,e,a,n)=>Y(t,"yAxis",a,n),Q=(t,e,a,n)=>Z(t,"yAxis",a,n),_e=B([M,J,H,U,Q],(t,e,a,n,r)=>fe(t,"xAxis")?z(e,n,!1):z(a,r,!1)),Be=(t,e,a,n,r)=>r;function we(t){return t.type==="line"}const Ke=B([Ve,Be],(t,e)=>t.filter(we).find(a=>a.id===e)),Fe=B([M,J,H,U,Q,Ke,_e,Te],(t,e,a,n,r,s,c,{chartData:u,dataStartIndex:d,dataEndIndex:o})=>{if(s==null||e==null||a==null||n==null||r==null||n.length===0||r.length===0||c==null||t!=="horizontal"&&t!=="vertical")return;const{dataKey:l,data:m}=s;let p;if(m!=null&&m.length>0?p=m:p=u==null?void 0:u.slice(d,o+1),p!=null)return _({layout:t,xAxis:e,yAxis:a,xAxisTicks:n,yAxisTicks:r,dataKey:l,bandSize:c,displayedData:p})}),qe=t=>{const{dataKey:e,name:a,stroke:n,legendType:r,hide:s}=t;return[{inactive:s,dataKey:e,type:r,color:n,value:j(a,e),payload:t}]},ze=i.memo(({dataKey:t,data:e,stroke:a,strokeWidth:n,fill:r,name:s,hide:c,unit:u,tooltipType:d,id:o})=>{const l={dataDefinedOnItem:e,getPosition:ie,settings:{stroke:a,strokeWidth:n,fill:r,dataKey:t,nameKey:void 0,name:j(s,t),hide:c,type:d,color:a,unit:u,graphicalItemId:o}};return i.createElement(Ae,{tooltipEntrySettings:l})}),ee=(t,e)=>`${e}px ${t-e}px`;function Re(t,e){const a=t.length%2!==0?[...t,0]:t;let n=[];for(let r=0;r<e;++r)n=[...n,...a];return n}const $e=(t,e,a)=>{const n=a.reduce((o,l)=>o+l);if(!n)return ee(e,t);const r=Math.floor(t/n),s=t%n,c=e-t;let u=[];for(let o=0,l=0;o<a.length;l+=a[o]??0,++o){const m=a[o];if(m!=null&&l+m>s){u=[...a.slice(0,o),s-l];break}}const d=u.length%2===0?[0,c]:[c];return[...Re(a,r),...u,...d].map(o=>`${o}px`).join(", ")};function Ge({clipPathId:t,points:e,props:a}){const{dot:n,dataKey:r,needClip:s}=a,{id:c,...u}=a,d=oe(u);return i.createElement(pe,{points:e,dot:n,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:r,baseProps:d,needClip:s,clipPathId:t})}function Me({showLabels:t,children:e,points:a}){const n=i.useMemo(()=>a==null?void 0:a.map(r=>{const s={x:r.x??0,y:r.y??0,width:0,lowerWidth:0,upperWidth:0,height:0};return{...s,value:r.value,payload:r.payload,viewBox:s,parentViewBox:void 0,fill:void 0}}),[a]);return i.createElement(de,{value:t?n:void 0},e)}function $({clipPathId:t,pathRef:e,points:a,strokeDasharray:n,props:r}){const{type:s,layout:c,connectNulls:u,needClip:d,shape:o,...l}=r,m={...se(l),fill:"none",className:"recharts-line-curve",clipPath:d?`url(#clipPath-${t})`:void 0,points:a,type:s,layout:c,connectNulls:u,strokeDasharray:n??r.strokeDasharray};return i.createElement(i.Fragment,null,(a==null?void 0:a.length)>1&&i.createElement(be,{shapeType:"curve",option:o,...m,pathRef:e}),i.createElement(Ge,{points:a,clipPathId:t,props:r}))}function Oe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function je({clipPathId:t,props:e,pathRef:a,previousPointsRef:n,longestAnimatedLengthRef:r}){const{points:s,strokeDasharray:c,isAnimationActive:u,animationBegin:d,animationDuration:o,animationEasing:l,animateNewValues:m,width:p,height:x,onAnimationEnd:f,onAnimationStart:h}=e,v=n.current,y=Se(s,"recharts-line-"),g=i.useRef(y),[E,I]=i.useState(!1),b=!E,N=i.useCallback(()=>{typeof f=="function"&&f(),I(!1)},[f]),W=i.useCallback(()=>{typeof h=="function"&&h(),I(!0)},[h]),L=Oe(a.current),k=i.useRef(0);g.current!==y&&(k.current=r.current,g.current=y);const w=k.current;return i.createElement(Me,{points:s,showLabels:b},e.children,i.createElement(De,{animationId:y,begin:d,duration:o,isActive:u,easing:l,onAnimationEnd:N,onAnimationStart:W,key:y},P=>{const ae=D(w,L+w,P),T=Math.min(ae,L);let S;if(u)if(c){const V=`${c}`.split(/[,\s]+/gim).map(C=>parseFloat(C));S=$e(T,L,V)}else S=ee(L,T);else S=c==null?void 0:String(c);if(P>0&&L>0&&(n.current=s,r.current=Math.max(r.current,T)),v){const V=v.length/s.length,C=P===1?s:s.map((A,ne)=>{const K=Math.floor(ne*V);if(v[K]){const F=v[K];return{...A,x:D(F.x,A.x,P),y:D(F.y,A.y,P)}}return m?{...A,x:D(p*2,A.x,P),y:D(x/2,A.y,P)}:{...A,x:A.x,y:A.y}});return n.current=C,i.createElement($,{props:e,points:C,clipPathId:t,pathRef:a,strokeDasharray:S})}return i.createElement($,{props:e,points:s,clipPathId:t,pathRef:a,strokeDasharray:S})}),i.createElement(ue,{label:e.label}))}function Xe({clipPathId:t,props:e}){const a=i.useRef(null),n=i.useRef(0),r=i.useRef(null);return i.createElement(je,{props:e,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:n,pathRef:r})}const Ye=(t,e)=>({x:t.x??void 0,y:t.y??void 0,value:t.value,errorVal:X(t.payload,e)});class Ze extends i.Component{render(){const{hide:e,dot:a,points:n,className:r,xAxisId:s,yAxisId:c,top:u,left:d,width:o,height:l,id:m,needClip:p,zIndex:x}=this.props;if(e)return null;const f=re("recharts-line",r),h=m,{r:v,strokeWidth:y}=Ce(a),g=ce(a),E=v*2+y,I=p?`url(#clipPath-${g?"":"dots-"}${h})`:void 0;return i.createElement(Ne,{zIndex:x},i.createElement(le,{className:f},p&&i.createElement("defs",null,i.createElement(Ie,{clipPathId:h,xAxisId:s,yAxisId:c}),!g&&i.createElement("clipPath",{id:`clipPath-dots-${h}`},i.createElement("rect",{x:d-E/2,y:u-E/2,width:o+E,height:l+E}))),i.createElement(ve,{xAxisId:s,yAxisId:c,data:n,dataPointFormatter:Ye,errorBarOffset:0},i.createElement(Xe,{props:this.props,clipPathId:h}))),i.createElement(me,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:I}))}}const te={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:he.line,type:"linear"};function Je(t){const{activeDot:e,animateNewValues:a,animationBegin:n,animationDuration:r,animationEasing:s,connectNulls:c,dot:u,hide:d,isAnimationActive:o,label:l,legendType:m,xAxisId:p,yAxisId:x,id:f,...h}=G(t,te),{needClip:v}=Ee(p,x),y=ke(),g=ye(),E=O(),I=xe(k=>Fe(k,p,x,E,f));if(g!=="horizontal"&&g!=="vertical"||I==null||y==null)return null;const{height:b,width:N,x:W,y:L}=y;return i.createElement(Ze,{...h,id:f,connectNulls:c,dot:u,activeDot:e,animateNewValues:a,animationBegin:n,animationDuration:r,animationEasing:s,isAnimationActive:o,hide:d,label:l,legendType:m,xAxisId:p,yAxisId:x,points:I,layout:g,height:b,width:N,left:W,top:L,needClip:v})}function _({layout:t,xAxis:e,yAxis:a,xAxisTicks:n,yAxisTicks:r,dataKey:s,bandSize:c,displayedData:u}){return u.map((d,o)=>{const l=X(d,s);if(t==="horizontal"){const x=R({axis:e,ticks:n,bandSize:c,entry:d,index:o}),f=q(l)?null:a.scale.map(l);return{x,y:f??null,value:l,payload:d}}const m=q(l)?null:e.scale.map(l),p=R({axis:a,ticks:r,bandSize:c,entry:d,index:o});return m==null||p==null?null:{x:m,y:p,value:l,payload:d}}).filter(Boolean)}function Ue(t){const e=G(t,te),a=O();return i.createElement(ge,{id:e.id,type:"line"},n=>i.createElement(i.Fragment,null,i.createElement(Le,{legendPayload:qe(e)}),i.createElement(ze,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:n}),i.createElement(Pe,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:a}),i.createElement(Je,{...e,id:n})))}const He=i.memo(Ue,We);He.displayName="Line";try{_.displayName="computeLinePoints",_.__docgenInfo={description:"",displayName:"computeLinePoints",props:{layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},xAxis:{defaultValue:null,description:"",name:"xAxis",required:!0,type:{name:"BaseAxisWithScale"}},yAxis:{defaultValue:null,description:"",name:"yAxis",required:!0,type:{name:"BaseAxisWithScale"}},xAxisTicks:{defaultValue:null,description:"",name:"xAxisTicks",required:!0,type:{name:"TickItem[]"}},yAxisTicks:{defaultValue:null,description:"",name:"yAxisTicks",required:!0,type:{name:"TickItem[]"}},dataKey:{defaultValue:null,description:"",name:"dataKey",required:!0,type:{name:"string | number | ((obj: any) => any) | undefined"}},bandSize:{defaultValue:null,description:"",name:"bandSize",required:!0,type:{name:"number"}},displayedData:{defaultValue:null,description:"",name:"displayedData",required:!0,type:{name:"ChartData"}}}}}catch{}export{He as L};
