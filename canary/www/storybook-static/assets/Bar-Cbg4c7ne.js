import{i as ee,r as s,j as re,n as Be,m as te,c as M,p as ke}from"./iframe-5gSlIHH4.js";import{r as se,c as Ee,a as Pe,b as Ce}from"./resolveDefaultProps-BqaV8AGt.js";import{L as G}from"./Layer-OyNvh1Ue.js";import{C as Ve,u as oe,a as le,b as ce}from"./tooltipContext-DWBZc0FA.js";import{f as Me,a as _e,C as ze}from"./ReactUtils-DmzojIhK.js";import{o as k,U as we,s as qe,p as R,E as ue,M as de,c as X,b as N,D as Y,F as me,l as Le,q as pe,W as Re,X as Ne,Y as ae}from"./arrayEqualityCheck-BEqt-CBJ.js";import{b as fe}from"./types-D2uPaQlB.js";import{S as De}from"./ActiveShapeUtils-B3Ii4nXp.js";import{a as Fe,R as Te,S as Ge}from"./RegisterGraphicalItemId-C8051Zi-.js";import{S as Oe}from"./ErrorBarContext-BOsyAuvl.js";import{u as We,G as Ke}from"./GraphicalItemClipPath-DuWpJ7iO.js";import{a0 as Ue,V as q,W as L,Y as Z,a8 as he,a9 as $e,aa as He,a2 as ne,ab as Xe,ai as ie}from"./axisSelectors-DaxAJyom.js";import{s as xe,v as Ye}from"./hooks-DcJw7lCF.js";import{S as Ze,a as je}from"./SetGraphicalItem-GsI-naXM.js";import{u as Je,J as Qe}from"./useAnimationId-CiuthG3f.js";import{Z as j}from"./ZIndexLayer-CgtyelTd.js";import{c as et,a as tt,b as at,d as nt,g as it}from"./getZIndexFromUnknown-DUxz7EUs.js";import{p as ye}from"./RechartsWrapper-D6JQB65s.js";import{R as rt}from"./Rectangle-CsjrTG3t.js";import{s as _,a as z}from"./graphicalItemSelectors-vmrcIgpC.js";var st="Invariant failed";function ot(e,t){if(!e)throw new Error(st)}function D(e){return s.createElement(De,{shapeType:"rectangle",activeClassName:"recharts-active-bar",inActiveClassName:"recharts-inactive-bar",...e})}const K=(e,t=0)=>(a,n)=>{if(ee(e))return e;const i=ee(a)||re(a);return i?e(a,n):(ot(i),t)};try{D.displayName="BarRectangle",D.__docgenInfo={description:"",displayName:"BarRectangle",props:{option:{defaultValue:null,description:"",name:"option",required:!0,type:{name:"ActiveShape<BarShapeProps, SVGPathElement> | undefined"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},onMouseEnter:{defaultValue:null,description:"The customized event handler of mouseenter on the rectangle",name:"onMouseEnter",required:!1,type:{name:"(((e: MouseEvent<SVGPathElement, MouseEvent>) => void) & MouseEventHandler<SVGPathElement> & ((e: MouseEvent<...>) => void))"}},onMouseLeave:{defaultValue:null,description:"The customized event handler of mouseleave on the rectangle",name:"onMouseLeave",required:!1,type:{name:"(((e: MouseEvent<SVGPathElement, MouseEvent>) => void) & MouseEventHandler<SVGPathElement> & ((e: MouseEvent<...>) => void))"}},onClick:{defaultValue:null,description:"The customized event handler of click on the rectangle",name:"onClick",required:!1,type:{name:"(((e: MouseEvent<SVGPathElement, MouseEvent>) => void) & MouseEventHandler<SVGPathElement> & ((e: MouseEvent<...>) => void))"}},width:{defaultValue:null,description:`Width of the rectangle in pixels.
@defaultValue 0`,name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:`Height of the rectangle in pixels.
@defaultValue 0`,name:"height",required:!1,type:{name:"number"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},dataKey:{defaultValue:null,description:"",name:"dataKey",required:!0,type:{name:"string | number | ((obj: any) => any) | undefined"}},radius:{defaultValue:null,description:`The radius of corners.

If you provide a single number, it applies to all four corners.
If you provide an array of four numbers, they apply to top-left, top-right, bottom-right, bottom-left corners respectively.
@see {@link https://recharts.github.io/en-US/guide/roundedBars/ Guide: Rounded bar corners}
@defaultValue 0`,name:"radius",required:!1,type:{name:"RectRadius"}},animationDuration:{defaultValue:null,description:"@defaultValue 1500",name:"animationDuration",required:!1,type:{name:"number"}},animationEasing:{defaultValue:null,description:"@defaultValue ease",name:"animationEasing",required:!1,type:{name:"EasingInput"}},isAnimationActive:{defaultValue:null,description:"@defaultValue false",name:"isAnimationActive",required:!1,type:{name:"boolean"}},isUpdateAnimationActive:{defaultValue:null,description:"@defaultValue false",name:"isUpdateAnimationActive",required:!1,type:{name:"boolean"}},animationBegin:{defaultValue:null,description:"@defaultValue 0",name:"animationBegin",required:!1,type:{name:"number"}}}}}catch{}try{K.displayName="minPointSizeCallback",K.__docgenInfo={description:"Safely gets minPointSize from the minPointSize prop if it is a function",displayName:"minPointSizeCallback",props:{}}}catch{}const lt=(e,t,a)=>a,ct=(e,t)=>t,F=k([Z,ct],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),ut=k([F],e=>e==null?void 0:e.maxBarSize),dt=(e,t,a,n)=>n,mt=k([R,Z,_,z,lt],(e,t,a,n,i)=>t.filter(r=>e==="horizontal"?r.xAxisId===a:r.yAxisId===n).filter(r=>r.isPanorama===i).filter(r=>r.hide===!1).filter(r=>r.type==="bar")),pt=(e,t,a)=>{const n=R(e),i=_(e,t),r=z(e,t);if(!(i==null||r==null))return n==="horizontal"?ne(e,"yAxis",r,a):ne(e,"xAxis",i,a)},ft=(e,t)=>{const a=R(e),n=_(e,t),i=z(e,t);if(!(n==null||i==null))return a==="horizontal"?ie(e,"xAxis",n):ie(e,"yAxis",i)},ht=k([mt,Xe,ft],nt),xt=(e,t,a)=>{const n=F(e,t);if(n==null)return 0;const i=_(e,t),r=z(e,t);if(i==null||r==null)return 0;const o=R(e),d=he(e),{maxBarSize:m}=n,c=re(m)?d:m;let x,f;return o==="horizontal"?(x=q(e,"xAxis",i,a),f=L(e,"xAxis",i,a)):(x=q(e,"yAxis",r,a),f=L(e,"yAxis",r,a)),ue(x,f,!0)??c??0},ge=(e,t,a)=>{const n=R(e),i=_(e,t),r=z(e,t);if(i==null||r==null)return;let o,d;return n==="horizontal"?(o=q(e,"xAxis",i,a),d=L(e,"xAxis",i,a)):(o=q(e,"yAxis",r,a),d=L(e,"yAxis",r,a)),ue(o,d)},yt=k([ht,he,$e,He,xt,ge,ut],at),gt=(e,t,a)=>{const n=_(e,t);if(n!=null)return q(e,"xAxis",n,a)},vt=(e,t,a)=>{const n=z(e,t);if(n!=null)return q(e,"yAxis",n,a)},It=(e,t,a)=>{const n=_(e,t);if(n!=null)return L(e,"xAxis",n,a)},At=(e,t,a)=>{const n=z(e,t);if(n!=null)return L(e,"yAxis",n,a)},St=k([yt,F],et),bt=k([pt,F],tt),ve=k([we,qe,gt,vt,It,At,St,R,Ue,ge,bt,F,dt],(e,t,a,n,i,r,o,d,{chartData:m,dataStartIndex:c,dataEndIndex:x},f,g,v,u)=>{if(v==null||o==null||t==null||d!=="horizontal"&&d!=="vertical"||a==null||n==null||i==null||r==null||f==null)return;const{data:l}=v;let I;if(l!=null&&l.length>0?I=l:I=m==null?void 0:m.slice(c,x+1),I!=null)return H({layout:d,barSettings:v,pos:o,parentViewBox:t,bandSize:f,xAxis:a,yAxis:n,xAxisTicks:i,yAxisTicks:r,stackedData:g,displayedData:I,offset:e,cells:u,dataStartIndex:c})}),Ie=(e,t)=>t,Ae=(e,t,a)=>a,Bt=k([Ie,Z,Ae],(e,t,a)=>t.filter(n=>n.type==="bar").filter(n=>n.stackId===e).filter(n=>n.isPanorama===a).filter(n=>!n.hide)),kt=k([Bt],e=>e.map(t=>t.id)),Et=(e,t)=>{if(!e)return t;if(!t)return e;const a=Math.min(e.x,e.x+e.width,t.x,t.x+t.width),n=Math.min(e.y,e.y+e.height,t.y,t.y+t.height),i=Math.max(e.x,e.x+e.width,t.x,t.x+t.width),r=Math.max(e.y,e.y+e.height,t.y,t.y+t.height),o=i-a,d=r-n;return{x:a,y:n,width:o,height:d}},Pt=(e,t,a)=>{const n=kt(e,t,a),i=[];return n.forEach(r=>{const o=ve(e,r,a,void 0);o==null||o.forEach((d,m)=>{i[m]=Et(i[m],d)})}),i},Ct=k([e=>e,Ie,Ae],Pt),J=s.createContext(void 0),U=e=>{const t=s.useContext(J);if(t!=null)return t.stackId;if(e!=null)return de(e)},Vt={radius:0},Se=(e,t)=>`recharts-bar-stack-clip-path-${e}-${t}`,$=e=>{const t=s.useContext(J);if(t==null)return;const{stackId:a}=t;return`url(#${Se(a,e)})`},O=({index:e,...t})=>{const a=$(e);return s.createElement(G,{className:"recharts-bar-stack-layer",clipPath:a,...t})},Mt=({stackId:e,radius:t})=>{const a=X(),n=N(i=>Ct(i,e,a));return n==null||n.length===0?null:s.createElement("defs",null,n.map((i,r)=>{if(i==null)return null;const o=Se(e,r);return s.createElement("clipPath",{key:o,id:o},s.createElement(rt,{isAnimationActive:!1,isUpdateAnimationActive:!1,x:i.x,y:i.y,width:i.width,height:i.height,radius:t}))}))},_t=e=>{const t=Fe("recharts-bar-stack",de(e.stackId)),{children:a,radius:n}=se(e,Vt),i=s.useMemo(()=>({stackId:t,radius:n}),[t,n]);return s.createElement(J.Provider,{value:i},s.createElement(Mt,{stackId:t,radius:n}),a)};s.memo(_t,ye);try{U.displayName="useStackId",U.__docgenInfo={description:`Hook to resolve the stack ID for a Bar component.
If a stack ID is provided via props, it is used directly.
Otherwise, this will read stack ID from BarStack context if available.
If both are undefined, it returns undefined.`,displayName:"useStackId",props:{}}}catch{}try{$.displayName="useBarStackClipPathUrl",$.__docgenInfo={description:"",displayName:"useBarStackClipPathUrl",props:{}}}catch{}try{O.displayName="BarStackClipLayer",O.__docgenInfo={description:"",displayName:"BarStackClipLayer",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}}}}}catch{}const zt=e=>{const{dataKey:t,name:a,fill:n,legendType:i,hide:r}=e;return[{inactive:r,dataKey:t,type:i,color:n,value:me(a,t),payload:e}]},wt=s.memo(({dataKey:e,stroke:t,strokeWidth:a,fill:n,name:i,hide:r,unit:o,tooltipType:d,id:m})=>{const c={dataDefinedOnItem:void 0,getPosition:Be,settings:{stroke:t,strokeWidth:a,fill:n,dataKey:e,nameKey:void 0,name:me(i,e),hide:r,type:d,color:n,unit:o,graphicalItemId:m}};return s.createElement(Ge,{tooltipEntrySettings:c})});function qt(e){const t=N(xe),{data:a,dataKey:n,background:i,allOtherBarProps:r}=e,{onMouseEnter:o,onMouseLeave:d,onClick:m,...c}=r,x=oe(o,n,r.id),f=le(d),g=ce(m,n,r.id);if(!i||a==null)return null;const v=Pe(i);return s.createElement(j,{zIndex:it(i,Y.barBackground)},a.map((u,l)=>{const{value:I,background:p,tooltipPosition:b,...h}=u;if(!p)return null;const E=x(u,l),y=f(u,l),P=g(u,l),B={option:i,isActive:String(l)===t,...h,fill:"#eee",...p,...v,...fe(c,u,l),onMouseEnter:E,onMouseLeave:y,onClick:P,dataKey:n,index:l,className:"recharts-bar-background-rectangle"};return s.createElement(D,{key:`background-bar-${l}`,...B})}))}function Lt({showLabels:e,children:t,rects:a}){const n=a==null?void 0:a.map(i=>{const r={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return{...r,value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:r,fill:i.fill}});return s.createElement(ze,{value:e?n:void 0},t)}function Rt(e){const{shape:t,activeBar:a,baseProps:n,entry:i,index:r,dataKey:o}=e,d=N(xe),m=N(Ye),c=a&&String(r)===d&&(m==null||o===m),[x,f]=s.useState(!1),[g,v]=s.useState(!1);s.useEffect(()=>{let h;return c?(f(!0),h=requestAnimationFrame(()=>{v(!0)})):v(!1),()=>{cancelAnimationFrame(h)}},[c]);const u=s.useCallback(()=>{c||f(!1)},[c]),l=c&&g,I=c||x;let p;c?a===!0?p=t:p=a:p=t;const b=s.createElement(D,{...n,name:String(n.name),...i,isActive:l,option:p,index:r,dataKey:o,onTransitionEnd:u});return I?s.createElement(j,{zIndex:Y.activeBar},s.createElement(O,{index:r},b)):b}function Nt(e){const{shape:t,baseProps:a,entry:n,index:i,dataKey:r}=e;return s.createElement(D,{...a,name:String(a.name),...n,isActive:!1,option:t,index:i,dataKey:r})}function Dt({data:e,props:t}){const{id:a,...n}=Ce(t)??{},{shape:i,dataKey:r,activeBar:o}=t,{onMouseEnter:d,onClick:m,onMouseLeave:c,...x}=t,f=oe(d,r,a),g=le(c),v=ce(m,r,a);return e?s.createElement(s.Fragment,null,e.map((u,l)=>s.createElement(O,{index:l,key:`rectangle-${u==null?void 0:u.x}-${u==null?void 0:u.y}-${u==null?void 0:u.value}-${l}`,className:"recharts-bar-rectangle",...fe(x,u,l),onMouseEnter:f(u,l),onMouseLeave:g(u,l),onClick:v(u,l)},o?s.createElement(Rt,{shape:i,activeBar:o,baseProps:n,entry:u,index:l,dataKey:r}):s.createElement(Nt,{shape:i,baseProps:n,entry:u,index:l,dataKey:r})))):null}function Ft({props:e,previousRectanglesRef:t}){const{data:a,layout:n,isAnimationActive:i,animationBegin:r,animationDuration:o,animationEasing:d,onAnimationEnd:m,onAnimationStart:c}=e,x=t.current,f=Je(e,"recharts-bar-"),[g,v]=s.useState(!1),u=!g,l=s.useCallback(()=>{typeof m=="function"&&m(),v(!1)},[m]),I=s.useCallback(()=>{typeof c=="function"&&c(),v(!0)},[c]);return s.createElement(Lt,{showLabels:u,rects:a},s.createElement(Qe,{animationId:f,begin:r,duration:o,isActive:i,easing:d,onAnimationEnd:l,onAnimationStart:I,key:f},p=>{const b=p===1?a:a==null?void 0:a.map((h,E)=>{const y=x&&x[E];if(y)return{...h,x:M(y.x,h.x,p),y:M(y.y,h.y,p),width:M(y.width,h.width,p),height:M(y.height,h.height,p)};if(n==="horizontal"){const A=M(0,h.height,p),S=M(h.stackedBarStart,h.y,p);return{...h,y:S,height:A}}const P=M(0,h.width,p),B=M(h.stackedBarStart,h.x,p);return{...h,width:P,x:B}});return p>0&&(t.current=b??null),b==null?null:s.createElement(G,null,s.createElement(Dt,{props:e,data:b}))}),s.createElement(_e,{label:e.label}),e.children)}function Tt(e){const t=s.useRef(null);return s.createElement(Ft,{previousRectanglesRef:t,props:e})}const be=0,Gt=(e,t)=>{const a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:pe(e,t)}};class Ot extends s.PureComponent{render(){const{hide:t,data:a,dataKey:n,className:i,xAxisId:r,yAxisId:o,needClip:d,background:m,id:c}=this.props;if(t||a==null)return null;const x=Ee("recharts-bar",i),f=c;return s.createElement(G,{className:x,id:c},d&&s.createElement("defs",null,s.createElement(Ke,{clipPathId:f,xAxisId:r,yAxisId:o})),s.createElement(G,{className:"recharts-bar-rectangles",clipPath:d?`url(#clipPath-${f})`:void 0},s.createElement(qt,{data:a,dataKey:n,background:m,allOtherBarProps:this.props}),s.createElement(Tt,{...this.props})))}}const Wt={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:be,xAxisId:0,yAxisId:0,zIndex:Y.bar};function Kt(e){const{xAxisId:t,yAxisId:a,hide:n,legendType:i,minPointSize:r,activeBar:o,animationBegin:d,animationDuration:m,animationEasing:c,isAnimationActive:x}=e,{needClip:f}=We(t,a),g=Le(),v=X(),u=Me(e.children,Ve),l=N(b=>ve(b,e.id,v,u));if(g!=="vertical"&&g!=="horizontal")return null;let I;const p=l==null?void 0:l[0];return p==null||p.height==null||p.width==null?I=0:I=g==="vertical"?p.height/2:p.width/2,s.createElement(Oe,{xAxisId:t,yAxisId:a,data:l,dataPointFormatter:Gt,errorBarOffset:I},s.createElement(Ot,{...e,layout:g,needClip:f,data:l,xAxisId:t,yAxisId:a,hide:n,legendType:i,minPointSize:r,activeBar:o,animationBegin:d,animationDuration:m,animationEasing:c,isAnimationActive:x}))}function H({layout:e,barSettings:{dataKey:t,minPointSize:a},pos:n,bandSize:i,xAxis:r,yAxis:o,xAxisTicks:d,yAxisTicks:m,stackedData:c,displayedData:x,offset:f,cells:g,parentViewBox:v,dataStartIndex:u}){const l=e==="horizontal"?o:r,I=c?l.scale.domain():null,p=Re({numericAxis:l}),b=l.scale.map(p);return x.map((h,E)=>{let y,P,B,A,S,W;if(c){const C=c[E+u];if(C==null)return null;y=Ne(C,I)}else y=pe(h,t),Array.isArray(y)||(y=[p,y]);const V=K(a,be)(y[1],E);if(e==="horizontal"){const C=o.scale.map(y[0]),w=o.scale.map(y[1]);if(C==null||w==null)return null;P=ae({axis:r,ticks:d,bandSize:i,offset:n.offset,entry:h,index:E}),B=w??C??void 0,A=n.size;const T=C-w;if(S=ke(T)?0:T,W={x:P,y:f.top,width:A,height:f.height},Math.abs(V)>0&&Math.abs(S)<Math.abs(V)){const Q=te(S||V)*(Math.abs(V)-Math.abs(S));B-=Q,S+=Q}}else{const C=r.scale.map(y[0]),w=r.scale.map(y[1]);if(C==null||w==null)return null;if(P=C,B=ae({axis:o,ticks:m,bandSize:i,offset:n.offset,entry:h,index:E}),A=w-C,S=n.size,W={x:f.left,y:B,width:f.width,height:S},Math.abs(V)>0&&Math.abs(A)<Math.abs(V)){const T=te(A||V)*(Math.abs(V)-Math.abs(A));A+=T}}return P==null||B==null||A==null||S==null?null:{...h,stackedBarStart:b,x:P,y:B,width:A,height:S,value:c?y:y[1],payload:h,background:W,tooltipPosition:{x:P+A/2,y:B+S/2},parentViewBox:v,...g&&g[E]&&g[E].props}}).filter(Boolean)}function Ut(e){const t=se(e,Wt),a=U(t.stackId),n=X();return s.createElement(Te,{id:t.id,type:"bar"},i=>s.createElement(s.Fragment,null,s.createElement(Ze,{legendPayload:zt(t)}),s.createElement(wt,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),s.createElement(je,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),s.createElement(j,{zIndex:t.zIndex},s.createElement(Kt,{...t,id:i}))))}const $t=s.memo(Ut,ye);$t.displayName="Bar";try{H.displayName="computeBarRectangles",H.__docgenInfo={description:"",displayName:"computeBarRectangles",props:{layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},barSettings:{defaultValue:null,description:"",name:"barSettings",required:!0,type:{name:"BarSettings"}},pos:{defaultValue:null,description:"",name:"pos",required:!0,type:{name:"BarPositionPosition"}},bandSize:{defaultValue:null,description:"",name:"bandSize",required:!0,type:{name:"number"}},xAxis:{defaultValue:null,description:"",name:"xAxis",required:!0,type:{name:"BaseAxisWithScale"}},yAxis:{defaultValue:null,description:"",name:"yAxis",required:!0,type:{name:"BaseAxisWithScale"}},xAxisTicks:{defaultValue:null,description:"",name:"xAxisTicks",required:!0,type:{name:"TickItem[]"}},yAxisTicks:{defaultValue:null,description:"",name:"yAxisTicks",required:!0,type:{name:"TickItem[]"}},stackedData:{defaultValue:null,description:"",name:"stackedData",required:!0,type:{name:"Series<Record<number, number>, string | number | ((obj: any) => any)> | undefined"}},offset:{defaultValue:null,description:"",name:"offset",required:!0,type:{name:"ChartOffsetInternal"}},displayedData:{defaultValue:null,description:"",name:"displayedData",required:!0,type:{name:"ChartData"}},cells:{defaultValue:null,description:"",name:"cells",required:!0,type:{name:"readonly ReactElement<any, string | JSXElementConstructor<any>>[] | undefined"}},parentViewBox:{defaultValue:null,description:"",name:"parentViewBox",required:!0,type:{name:"Required<CartesianViewBox>"}},dataStartIndex:{defaultValue:null,description:"",name:"dataStartIndex",required:!0,type:{name:"number"}}}}}catch{}export{$t as B};
