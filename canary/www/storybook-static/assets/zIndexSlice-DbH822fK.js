import{o as l,D as o,I as u,J as i,K as s,L as d}from"./arrayEqualityCheck-CHFkqTV_.js";const f=l(e=>e.zIndex.zIndexMap,(e,r)=>r,(e,r,n)=>n,(e,r,n)=>{if(r==null)return;const a=e[r];if(a!=null)return n?a.panoramaElement:a.element}),M=l(e=>e.zIndex.zIndexMap,e=>{const r=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(o));return Array.from(new Set(r)).sort((a,t)=>a-t)},{memoizeOptions:{resultEqualityCheck:u}}),p={},m={zIndexMap:Object.values(o).reduce((e,r)=>({...e,[r]:{element:void 0,panoramaElement:void 0,consumers:0}}),p)},I=new Set(Object.values(o));function x(e){return I.has(e)}const c=i({name:"zIndex",initialState:m,reducers:{registerZIndexPortal:{reducer:(e,r)=>{const{zIndex:n}=r.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:s()},unregisterZIndexPortal:{reducer:(e,r)=>{const{zIndex:n}=r.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!x(n)&&delete e.zIndexMap[n])},prepare:s()},registerZIndexPortalElement:{reducer:(e,r)=>{const{zIndex:n,element:a,isPanorama:t}=r.payload;e.zIndexMap[n]?t?e.zIndexMap[n].panoramaElement=d(a):e.zIndexMap[n].element=d(a):e.zIndexMap[n]={consumers:0,element:t?void 0:d(a),panoramaElement:t?d(a):void 0}},prepare:s()},unregisterZIndexPortalElement:{reducer:(e,r)=>{const{zIndex:n}=r.payload;e.zIndexMap[n]&&(r.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:s()}}}),{registerZIndexPortal:v,unregisterZIndexPortal:E,registerZIndexPortalElement:Z,unregisterZIndexPortalElement:P}=c.actions,y=c.reducer;export{M as a,Z as b,P as c,v as r,f as s,E as u,y as z};
