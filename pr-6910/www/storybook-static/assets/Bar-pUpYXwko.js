import{i as ee,r as o,j as re,n as ke,m as te,c as M,o as be}from"./iframe-Qbvlqe9c.js";import{r as oe,c as Ee,a as Pe,b as Ce}from"./resolveDefaultProps-76Pg9xKV.js";import{L as G}from"./Layer-CGD9i9Tv.js";import{C as Ve,u as le,a as se,b as ce}from"./tooltipContext-CUM_ZwHn.js";import{f as Me,a as _e,C as ze}from"./ReactUtils-DDfXx9yL.js";import{o as k,V as we,s as qe,p as N,E as ue,M as de,c as H,b as D,D as Y,F as me,l as Re,q as pe,W as Le,X as Ne,Y as ae}from"./arrayEqualityCheck-B3n_664E.js";import{b as fe}from"./types-BIElRGEC.js";import{S as De}from"./ActiveShapeUtils-DIh0EQro.js";import{a as Fe,R as Te,S as Ge}from"./RegisterGraphicalItemId-Bl4eT23s.js";import{S as Oe}from"./ErrorBarContext-BToEOD0T.js";import{u as Ke,G as We}from"./GraphicalItemClipPath-LG6KLgtm.js";import{$ as Ue,U as q,V as R,X as Z,a7 as he,a8 as $e,a9 as Xe,a1 as ne,aa as He,ah as ie}from"./axisSelectors-DP3q5L3p.js";import{s as xe,v as Ye}from"./hooks-C__9gfvB.js";import{S as Ze,a as Je}from"./SetGraphicalItem-BGT_K21t.js";import{u as je,J as Qe}from"./useAnimationId-BMBkTPld.js";import{Z as J}from"./ZIndexLayer-BGnFu8Hz.js";import{c as et,a as tt,b as at,d as nt,g as it}from"./getZIndexFromUnknown-BMSIXyuh.js";import{p as ye}from"./CategoricalChart-BN7dR1q_.js";import{R as rt}from"./Rectangle-Dq-tt7hT.js";import{s as _,a as z}from"./graphicalItemSelectors-CvbJlI49.js";var ot="Invariant failed";function lt(e,t){if(!e)throw new Error(ot)}function L(e){return o.createElement(De,{shapeType:"rectangle",activeClassName:"recharts-active-bar",...e})}const W=(e,t=0)=>(a,n)=>{if(ee(e))return e;const i=ee(a)||re(a);return i?e(a,n):(lt(i),t)};try{L.displayName="BarRectangle",L.__docgenInfo={description:"",displayName:"BarRectangle",props:{option:{defaultValue:null,description:"",name:"option",required:!0,type:{name:"ActiveShape<BarShapeProps, SVGPathElement> | undefined"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},onMouseEnter:{defaultValue:null,description:"The customized event handler of mouseenter on the rectangle",name:"onMouseEnter",required:!1,type:{name:"(((e: MouseEvent<SVGPathElement, MouseEvent>) => void) & MouseEventHandler<SVGPathElement> & ((e: MouseEvent<...>) => void))"}},onMouseLeave:{defaultValue:null,description:"The customized event handler of mouseleave on the rectangle",name:"onMouseLeave",required:!1,type:{name:"(((e: MouseEvent<SVGPathElement, MouseEvent>) => void) & MouseEventHandler<SVGPathElement> & ((e: MouseEvent<...>) => void))"}},onClick:{defaultValue:null,description:"The customized event handler of click on the rectangle",name:"onClick",required:!1,type:{name:"(((e: MouseEvent<SVGPathElement, MouseEvent>) => void) & MouseEventHandler<SVGPathElement> & ((e: MouseEvent<...>) => void))"}},width:{defaultValue:null,description:`Width of the rectangle in pixels.
@defaultValue 0`,name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:`Height of the rectangle in pixels.
@defaultValue 0`,name:"height",required:!1,type:{name:"number"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},dataKey:{defaultValue:null,description:"",name:"dataKey",required:!0,type:{name:"DataKey<any> | undefined"}},radius:{defaultValue:null,description:`The radius of corners.

If you provide a single number, it applies to all four corners.
If you provide an array of four numbers, they apply to top-left, top-right, bottom-right, bottom-left corners respectively.
@see {@link https://recharts.github.io/en-US/guide/roundedBars/ Guide: Rounded bar corners}
@defaultValue 0`,name:"radius",required:!1,type:{name:"RectRadius"}},animationDuration:{defaultValue:null,description:"@defaultValue 1500",name:"animationDuration",required:!1,type:{name:"number"}},animationEasing:{defaultValue:null,description:"@defaultValue ease",name:"animationEasing",required:!1,type:{name:"EasingInput"}},isAnimationActive:{defaultValue:null,description:"@defaultValue false",name:"isAnimationActive",required:!1,type:{name:"boolean"}},isUpdateAnimationActive:{defaultValue:null,description:"@defaultValue false",name:"isUpdateAnimationActive",required:!1,type:{name:"boolean"}},animationBegin:{defaultValue:null,description:"@defaultValue 0",name:"animationBegin",required:!1,type:{name:"number"}}}}}catch{}try{W.displayName="minPointSizeCallback",W.__docgenInfo={description:"Safely gets minPointSize from the minPointSize prop if it is a function",displayName:"minPointSizeCallback",props:{}}}catch{}const st=(e,t,a)=>a,ct=(e,t)=>t,F=k([Z,ct],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),ut=k([F],e=>e==null?void 0:e.maxBarSize),dt=(e,t,a,n)=>n,mt=k([N,Z,_,z,st],(e,t,a,n,i)=>t.filter(r=>e==="horizontal"?r.xAxisId===a:r.yAxisId===n).filter(r=>r.isPanorama===i).filter(r=>r.hide===!1).filter(r=>r.type==="bar")),pt=(e,t,a)=>{const n=N(e),i=_(e,t),r=z(e,t);if(!(i==null||r==null))return n==="horizontal"?ne(e,"yAxis",r,a):ne(e,"xAxis",i,a)},ft=(e,t)=>{const a=N(e),n=_(e,t),i=z(e,t);if(!(n==null||i==null))return a==="horizontal"?ie(e,"xAxis",n):ie(e,"yAxis",i)},ht=k([mt,He,ft],nt),xt=(e,t,a)=>{const n=F(e,t);if(n==null)return 0;const i=_(e,t),r=z(e,t);if(i==null||r==null)return 0;const l=N(e),c=he(e),{maxBarSize:m}=n,u=re(m)?c:m;let h,p;return l==="horizontal"?(h=q(e,"xAxis",i,a),p=R(e,"xAxis",i,a)):(h=q(e,"yAxis",r,a),p=R(e,"yAxis",r,a)),ue(h,p,!0)??u??0},ge=(e,t,a)=>{const n=N(e),i=_(e,t),r=z(e,t);if(i==null||r==null)return;let l,c;return n==="horizontal"?(l=q(e,"xAxis",i,a),c=R(e,"xAxis",i,a)):(l=q(e,"yAxis",r,a),c=R(e,"yAxis",r,a)),ue(l,c)},yt=k([ht,he,$e,Xe,xt,ge,ut],at),gt=(e,t,a)=>{const n=_(e,t);if(n!=null)return q(e,"xAxis",n,a)},vt=(e,t,a)=>{const n=z(e,t);if(n!=null)return q(e,"yAxis",n,a)},It=(e,t,a)=>{const n=_(e,t);if(n!=null)return R(e,"xAxis",n,a)},St=(e,t,a)=>{const n=z(e,t);if(n!=null)return R(e,"yAxis",n,a)},At=k([yt,F],et),Bt=k([pt,F],tt),ve=k([we,qe,gt,vt,It,St,At,N,Ue,ge,Bt,F,dt],(e,t,a,n,i,r,l,c,{chartData:m,dataStartIndex:u,dataEndIndex:h},p,g,v,d)=>{if(v==null||l==null||t==null||c!=="horizontal"&&c!=="vertical"||a==null||n==null||i==null||r==null||p==null)return;const{data:s}=v;let I;if(s!=null&&s.length>0?I=s:I=m==null?void 0:m.slice(u,h+1),I!=null)return X({layout:c,barSettings:v,pos:l,parentViewBox:t,bandSize:p,xAxis:a,yAxis:n,xAxisTicks:i,yAxisTicks:r,stackedData:g,displayedData:I,offset:e,cells:d,dataStartIndex:u})}),Ie=(e,t)=>t,Se=(e,t,a)=>a,kt=k([Ie,Z,Se],(e,t,a)=>t.filter(n=>n.type==="bar").filter(n=>n.stackId===e).filter(n=>n.isPanorama===a).filter(n=>!n.hide)),bt=k([kt],e=>e.map(t=>t.id)),Et=(e,t)=>{if(!e)return t;if(!t)return e;const a=Math.min(e.x,e.x+e.width,t.x,t.x+t.width),n=Math.min(e.y,e.y+e.height,t.y,t.y+t.height),i=Math.max(e.x,e.x+e.width,t.x,t.x+t.width),r=Math.max(e.y,e.y+e.height,t.y,t.y+t.height),l=i-a,c=r-n;return{x:a,y:n,width:l,height:c}},Pt=(e,t,a)=>{const n=bt(e,t,a),i=[];return n.forEach(r=>{const l=ve(e,r,a,void 0);l==null||l.forEach((c,m)=>{i[m]=Et(i[m],c)})}),i},Ct=k([e=>e,Ie,Se],Pt),j=o.createContext(void 0),U=e=>{const t=o.useContext(j);if(t!=null)return t.stackId;if(e!=null)return de(e)},Vt={radius:0},Ae=(e,t)=>`recharts-bar-stack-clip-path-${e}-${t}`,$=e=>{const t=o.useContext(j);if(t==null)return;const{stackId:a}=t;return`url(#${Ae(a,e)})`},O=({index:e,...t})=>{const a=$(e);return o.createElement(G,{className:"recharts-bar-stack-layer",clipPath:a,...t})},Mt=({stackId:e,radius:t})=>{const a=H(),n=D(i=>Ct(i,e,a));return n==null||n.length===0?null:o.createElement("defs",null,n.map((i,r)=>{if(i==null)return null;const l=Ae(e,r);return o.createElement("clipPath",{key:l,id:l},o.createElement(rt,{isAnimationActive:!1,isUpdateAnimationActive:!1,x:i.x,y:i.y,width:i.width,height:i.height,radius:t}))}))},_t=e=>{const t=Fe("recharts-bar-stack",de(e.stackId)),{children:a,radius:n}=oe(e,Vt),i=o.useMemo(()=>({stackId:t,radius:n}),[t,n]);return o.createElement(j.Provider,{value:i},o.createElement(Mt,{stackId:t,radius:n}),a)};o.memo(_t,ye);try{U.displayName="useStackId",U.__docgenInfo={description:`Hook to resolve the stack ID for a Bar component.
If a stack ID is provided via props, it is used directly.
Otherwise, this will read stack ID from BarStack context if available.
If both are undefined, it returns undefined.`,displayName:"useStackId",props:{}}}catch{}try{$.displayName="useBarStackClipPathUrl",$.__docgenInfo={description:"",displayName:"useBarStackClipPathUrl",props:{}}}catch{}try{O.displayName="BarStackClipLayer",O.__docgenInfo={description:"",displayName:"BarStackClipLayer",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}}}}}catch{}const zt=e=>{const{dataKey:t,name:a,fill:n,legendType:i,hide:r}=e;return[{inactive:r,dataKey:t,type:i,color:n,value:me(a,t),payload:e}]},wt=o.memo(({dataKey:e,stroke:t,strokeWidth:a,fill:n,name:i,hide:r,unit:l,tooltipType:c,id:m})=>{const u={dataDefinedOnItem:void 0,getPosition:ke,settings:{stroke:t,strokeWidth:a,fill:n,dataKey:e,nameKey:void 0,name:me(i,e),hide:r,type:c,color:n,unit:l,graphicalItemId:m}};return o.createElement(Ge,{tooltipEntrySettings:u})});function qt(e){const t=D(xe),{data:a,dataKey:n,background:i,allOtherBarProps:r}=e,{onMouseEnter:l,onMouseLeave:c,onClick:m,...u}=r,h=le(l,n,r.id),p=se(c),g=ce(m,n,r.id);if(!i||a==null)return null;const v=Pe(i);return o.createElement(J,{zIndex:it(i,Y.barBackground)},a.map((d,s)=>{const{value:I,background:f,tooltipPosition:C,...x}=d;if(!f)return null;const b=h(d,s),y=p(d,s),E=g(d,s),B={option:i,isActive:String(s)===t,...x,fill:"#eee",...f,...v,...fe(u,d,s),onMouseEnter:b,onMouseLeave:y,onClick:E,dataKey:n,index:s,className:"recharts-bar-background-rectangle"};return o.createElement(L,{key:`background-bar-${s}`,...B})}))}function Rt({showLabels:e,children:t,rects:a}){const n=a==null?void 0:a.map(i=>{const r={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return{...r,value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:r,fill:i.fill}});return o.createElement(ze,{value:e?n:void 0},t)}function Lt(e){const{shape:t,activeBar:a,baseProps:n,entry:i,index:r,dataKey:l}=e,c=D(xe),m=D(Ye),u=a&&String(r)===c&&(m==null||l===m),h=u?a:t;return u?o.createElement(J,{zIndex:Y.activeBar},o.createElement(O,{index:r},o.createElement(L,{...n,name:String(n.name),...i,isActive:u,option:h,index:r,dataKey:l}))):o.createElement(L,{...n,name:String(n.name),...i,isActive:u,option:h,index:r,dataKey:l})}function Nt(e){const{shape:t,baseProps:a,entry:n,index:i,dataKey:r}=e;return o.createElement(L,{...a,name:String(a.name),...n,isActive:!1,option:t,index:i,dataKey:r})}function Dt({data:e,props:t}){const{id:a,...n}=Ce(t)??{},{shape:i,dataKey:r,activeBar:l}=t,{onMouseEnter:c,onClick:m,onMouseLeave:u,...h}=t,p=le(c,r,a),g=se(u),v=ce(m,r,a);return e?o.createElement(o.Fragment,null,e.map((d,s)=>o.createElement(O,{index:s,key:`rectangle-${d==null?void 0:d.x}-${d==null?void 0:d.y}-${d==null?void 0:d.value}-${s}`,className:"recharts-bar-rectangle",...fe(h,d,s),onMouseEnter:p(d,s),onMouseLeave:g(d,s),onClick:v(d,s)},l?o.createElement(Lt,{shape:i,activeBar:l,baseProps:n,entry:d,index:s,dataKey:r}):o.createElement(Nt,{shape:i,baseProps:n,entry:d,index:s,dataKey:r})))):null}function Ft({props:e,previousRectanglesRef:t}){const{data:a,layout:n,isAnimationActive:i,animationBegin:r,animationDuration:l,animationEasing:c,onAnimationEnd:m,onAnimationStart:u}=e,h=t.current,p=je(e,"recharts-bar-"),[g,v]=o.useState(!1),d=!g,s=o.useCallback(()=>{typeof m=="function"&&m(),v(!1)},[m]),I=o.useCallback(()=>{typeof u=="function"&&u(),v(!0)},[u]);return o.createElement(Rt,{showLabels:d,rects:a},o.createElement(Qe,{animationId:p,begin:r,duration:l,isActive:i,easing:c,onAnimationEnd:s,onAnimationStart:I,key:p},f=>{const C=f===1?a:a==null?void 0:a.map((x,b)=>{const y=h&&h[b];if(y)return{...x,x:M(y.x,x.x,f),y:M(y.y,x.y,f),width:M(y.width,x.width,f),height:M(y.height,x.height,f)};if(n==="horizontal"){const S=M(0,x.height,f),A=M(x.stackedBarStart,x.y,f);return{...x,y:A,height:S}}const E=M(0,x.width,f),B=M(x.stackedBarStart,x.x,f);return{...x,width:E,x:B}});return f>0&&(t.current=C??null),C==null?null:o.createElement(G,null,o.createElement(Dt,{props:e,data:C}))}),o.createElement(_e,{label:e.label}),e.children)}function Tt(e){const t=o.useRef(null);return o.createElement(Ft,{previousRectanglesRef:t,props:e})}const Be=0,Gt=(e,t)=>{const a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:pe(e,t)}};class Ot extends o.PureComponent{render(){const{hide:t,data:a,dataKey:n,className:i,xAxisId:r,yAxisId:l,needClip:c,background:m,id:u}=this.props;if(t||a==null)return null;const h=Ee("recharts-bar",i),p=u;return o.createElement(G,{className:h,id:u},c&&o.createElement("defs",null,o.createElement(We,{clipPathId:p,xAxisId:r,yAxisId:l})),o.createElement(G,{className:"recharts-bar-rectangles",clipPath:c?`url(#clipPath-${p})`:void 0},o.createElement(qt,{data:a,dataKey:n,background:m,allOtherBarProps:this.props}),o.createElement(Tt,{...this.props})))}}const Kt={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Be,xAxisId:0,yAxisId:0,zIndex:Y.bar};function Wt(e){const{xAxisId:t,yAxisId:a,hide:n,legendType:i,minPointSize:r,activeBar:l,animationBegin:c,animationDuration:m,animationEasing:u,isAnimationActive:h}=e,{needClip:p}=Ke(t,a),g=Re(),v=H(),d=Me(e.children,Ve),s=D(C=>ve(C,e.id,v,d));if(g!=="vertical"&&g!=="horizontal")return null;let I;const f=s==null?void 0:s[0];return f==null||f.height==null||f.width==null?I=0:I=g==="vertical"?f.height/2:f.width/2,o.createElement(Oe,{xAxisId:t,yAxisId:a,data:s,dataPointFormatter:Gt,errorBarOffset:I},o.createElement(Ot,{...e,layout:g,needClip:p,data:s,xAxisId:t,yAxisId:a,hide:n,legendType:i,minPointSize:r,activeBar:l,animationBegin:c,animationDuration:m,animationEasing:u,isAnimationActive:h}))}function X({layout:e,barSettings:{dataKey:t,minPointSize:a},pos:n,bandSize:i,xAxis:r,yAxis:l,xAxisTicks:c,yAxisTicks:m,stackedData:u,displayedData:h,offset:p,cells:g,parentViewBox:v,dataStartIndex:d}){const s=e==="horizontal"?l:r,I=u?s.scale.domain():null,f=Le({numericAxis:s}),C=s.scale.map(f);return h.map((x,b)=>{let y,E,B,S,A,K;if(u){const P=u[b+d];if(P==null)return null;y=Ne(P,I)}else y=pe(x,t),Array.isArray(y)||(y=[f,y]);const V=W(a,Be)(y[1],b);if(e==="horizontal"){const P=l.scale.map(y[0]),w=l.scale.map(y[1]);if(P==null||w==null)return null;E=ae({axis:r,ticks:c,bandSize:i,offset:n.offset,entry:x,index:b}),B=w??P??void 0,S=n.size;const T=P-w;if(A=be(T)?0:T,K={x:E,y:p.top,width:S,height:p.height},Math.abs(V)>0&&Math.abs(A)<Math.abs(V)){const Q=te(A||V)*(Math.abs(V)-Math.abs(A));B-=Q,A+=Q}}else{const P=r.scale.map(y[0]),w=r.scale.map(y[1]);if(P==null||w==null)return null;if(E=P,B=ae({axis:l,ticks:m,bandSize:i,offset:n.offset,entry:x,index:b}),S=w-P,A=n.size,K={x:p.left,y:B,width:p.width,height:A},Math.abs(V)>0&&Math.abs(S)<Math.abs(V)){const T=te(S||V)*(Math.abs(V)-Math.abs(S));S+=T}}return E==null||B==null||S==null||A==null?null:{...x,stackedBarStart:C,x:E,y:B,width:S,height:A,value:u?y:y[1],payload:x,background:K,tooltipPosition:{x:E+S/2,y:B+A/2},parentViewBox:v,...g&&g[b]&&g[b].props}}).filter(Boolean)}function Ut(e){const t=oe(e,Kt),a=U(t.stackId),n=H();return o.createElement(Te,{id:t.id,type:"bar"},i=>o.createElement(o.Fragment,null,o.createElement(Ze,{legendPayload:zt(t)}),o.createElement(wt,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),o.createElement(Je,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),o.createElement(J,{zIndex:t.zIndex},o.createElement(Wt,{...t,id:i}))))}const $t=o.memo(Ut,ye);$t.displayName="Bar";try{X.displayName="computeBarRectangles",X.__docgenInfo={description:"",displayName:"computeBarRectangles",props:{layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},barSettings:{defaultValue:null,description:"",name:"barSettings",required:!0,type:{name:"BarSettings"}},pos:{defaultValue:null,description:"",name:"pos",required:!0,type:{name:"BarPositionPosition"}},bandSize:{defaultValue:null,description:"",name:"bandSize",required:!0,type:{name:"number"}},xAxis:{defaultValue:null,description:"",name:"xAxis",required:!0,type:{name:"BaseAxisWithScale"}},yAxis:{defaultValue:null,description:"",name:"yAxis",required:!0,type:{name:"BaseAxisWithScale"}},xAxisTicks:{defaultValue:null,description:"",name:"xAxisTicks",required:!0,type:{name:"TickItem[]"}},yAxisTicks:{defaultValue:null,description:"",name:"yAxisTicks",required:!0,type:{name:"TickItem[]"}},stackedData:{defaultValue:null,description:"",name:"stackedData",required:!0,type:{name:"Series<Record<number, number>, DataKey<any>> | undefined"}},offset:{defaultValue:null,description:"",name:"offset",required:!0,type:{name:"ChartOffsetInternal"}},displayedData:{defaultValue:null,description:"",name:"displayedData",required:!0,type:{name:"ChartData"}},cells:{defaultValue:null,description:"",name:"cells",required:!0,type:{name:"readonly ReactElement<any, string | JSXElementConstructor<any>>[] | undefined"}},parentViewBox:{defaultValue:null,description:"",name:"parentViewBox",required:!0,type:{name:"Required<CartesianViewBox>"}},dataStartIndex:{defaultValue:null,description:"",name:"dataStartIndex",required:!0,type:{name:"number"}}}}}catch{}export{$t as B};
